{% extends "Main.html" %}
{% load static %}


{% block content %}
    <div class="flex h-[81vh] items-center justify-center">
        <div class='w-80 h-fit border border-black rounded-md pt-5 pb-2' id='signupBox'>
            {% block signup %}
                <div class='place-items-center' id='modalSignup'>
                    <h1 class='text-2xl'>Signup</h1>
                    <p class="text-red-500 hidden" id='signupError'></p>
                    {% if error %}
                    <p class="text-red-500">{{ error }}</p>
                    {% endif %}
                    <form action="{% url 'signup' %}" method='post' id='signupForm'>
                        {% csrf_token %}
                        <div class='flex flex-col mt-5 p-3'>
                            <input class='rounded-md m-2' type="text" name="username" id="userNameSignup" placeholder='Username'>                            <input class='rounded-md m-2' type="email" name="email" id="emailSignup" placeholder='Email'>
                            <input class='rounded-md m-2' type="password" name="password" id="passwordSignup" placeholder='Password' autocomplete='new-password'>
                            <input class='rounded-md m-2' type="password" name="confirm_password" id="confirmPasswordSignup" placeholder='Confirm password' autocomplete='off'>
                        </div>
                        <div class='flex flex-col'>
                            <button type='button' onclick='checkSignup()' class='hover:opacity-80 text-md' id='signupBtn'>Signup</button>
                            <button type='button' onclick='linkToLogin()' class='opacity-80 hover:opacity-70 text-sm'>Login</button>
                        </div>
                    </form>
                </div>                
            {% endblock signup %}
        </div>
    </div>

    <script type='text/javascript'>
        document.querySelector('#signupForm').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkSignup()
            }
        })

        function linkToLogin() {
            if (window.location.href.includes('next')) {
                window.location.href = window.location.href.replace('signup', 'login');
            } else {
                window.location.href = "{% url 'login' %}";
            }
        }
    </script>
{% endblock content %}
    